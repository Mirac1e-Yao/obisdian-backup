# 基本概念
---
- Sub Pixel Rendering，简称SPR。
- 重采样：区分为上采样和下采样。上采样指以高于2倍信号频率进行采样，下采样指以低于2倍信号频率进行采样。重采样有**最近邻法**、**双线性内插法**以及**三次卷积内插法**。
- 采样定理：在进行模拟/数字信号的转换过程中，当采样频率fs.max大于信号中最高频率fmax的2倍时(fs.max>2fmax)，采样之后的数字信号完整地保留了原始信号中的信息，**一般实际应用中保证采样频率为信号最高频率的2.56～4倍**；采样定理又称奈奎斯特定理。
- Low Pass Filter，简称LPF，低通滤波器。
## 为什么要做SPR？
---
- OLED面板在设计制造过程中，需要在高PPI及工艺复杂度之间进行折中，衍生出了减少子像素数量的需求，又为了实现与Real RGB一样的显示效果，因此还需对子像素的排列（空间借色）和物理特性进行调整，再通过算法IP来补偿调整带来的影响（Rendering，3转2）。
- 因为R/G/B三色子像素的发光效率及寿命不同，存在G>R>B的关系，因此像素面积大小为G最小，R次之，B最大。
![[SPR示意.png]]
## SPR算法基于采样定理的解释
---
- 原始图像数据是基于3个subpixel(RGB排布)来存储的，当它要传输到2个subpixel(RGBG排布)的实际子像素电路上的时候，依据采样定理是小于2倍fs.max的。为了避免混叠效应(马赛克状)，就需要通过引入LPF来进行抗混叠处理以挽回图像质量(雾状)。因此，SPR算法(借色)相当于LPF，在采样前先将高于fs.max一半的信号滤除，使得后续采样时能够满足采样定理。


# 补偿原理
---
- 线性滤波器：以3x3矩阵滑动卷积来对中心点像素进行权重配比，适用各种情况。
- 非线性滤波器：通过检测边缘case(如强边缘、斜线、黑白点等)，使用一些预设好的3x3矩阵权重配比系数来对边缘做锐化、模糊或不处理的动作，相当于配置不同的滤波系数。


# 应用场景
---
- 用于图标/文字/斜线平滑等场景的使用，是常开的IP。
- 部分高阶手机也会通过AP来处理。
![[SPR效果图.png]]